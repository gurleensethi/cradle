version: v1
name: Go Http
description: Setup a basic go http server

inputs:
  - name: GoVersion
    default: 1.25
    required: true
    description: Specify the Go version for the project.
    type: float
    validate:
        message: must be a valid number.
        min: 1

  - name: ModuleName
    description: The module name for the Go project (e.g., github.com/username/projectname).
    required: true
    type: string
    validate:
        pattern: "^[a-zA-Z0-9_~.-]+(/[a-zA-Z0-9_~.-]+)*$"
        message: Module name must be a valid.

  - name: Port
    description: Port at which http server will listen and serve requests
    default: 8080
    required: true
    type: int
    validate:
        min: 0
        max: 65535

files:
    go.mod: |
        module {{.ModuleName}}

        go {{.GoVersion}}

    main.go: |
        package main

        import (
            "fmt"
            "net/http"
        )

        func main() {
            mux := http.NewServeMux()

            mux.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
                w.WriteHeader(http.StatusOK)
                w.Write([]byte("Hello from go!"))
            })

            addr := ":{{.Port}}"

            fmt.Printf("listening on %s...\n", addr)

            http.ListenAndServe(addr, mux)
        }

    README.md: |
        # {{.ProjectName}}

        This is a basic Go http project template.

    .gitignore: |
        # Binaries for the current project
        *.exe
        *.dll
        *.so
        *.dylib
        *.o

        # Compiled Go packages
        *.a

        # Test binary, generated by `go test -c`
        *.test

        # Go module cache
        /pkg/mod/

        # Dependency directories (if not using Go modules)
        vendor/

        # Log files
        *.log

        # Editor/IDE specific files
        .idea/
        .vscode/
        *.swp
        *.bak
        *~

        # Operating System generated files
        .DS_Store
        Thumbs.db
